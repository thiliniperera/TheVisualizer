<html>
<head>
<script src="libraries/shp.js"></script>
<script src="libraries/topojson.js"></script>
<script src="libraries/d3.js" charset="utf-8"></script>
<script src="libraries/d3.min.js"></script>
<script >

function loadShapeFile(){

    //function from shp.js to convert shapefile to geojson
    shp("shapefiles/EGY_adm.zip").then(function(geojson){

              
            console.log("geojson loaded");
            console.log(geojson[1]);


            var width = 1000,height = 1000;
            
            
            //creating the canvas to hold the map
             var canvas= d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height)                
                .style("border", "1px solid black");

            //project the map on a flat surface using guesses
            var projection = d3.geo.mercator()
                .scale(1)
                .translate([0, 0]);

            //geographic path generator(translate coordinates to pixels on the canvas)
            var path = d3.geo.path()
                .projection(projection);

             // using the path determine the bounds of the current map and use 
             // these to determine better values for the scale and translation
            var b = path.bounds(geojson[1]),
                s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
                 //scaled the bounding box to 95% of the canvas, rather than 100%, so thereâ€™s a little extra room on the edges for strokes and surrounding features or padding.
                t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];



            // new projection
              projection = d3.geo.mercator()
                             .scale(s).translate(t);
              path = path.projection(projection);

            //drawing path on the canvas
           var areas = canvas.selectAll("path")
                    .data(geojson[1].features)
                    .enter()
                    .append("path")
                    .attr("d", path)
                    .attr("fill", "#81F781")
                    .attr("stroke", "#222");


              //including text if available
                canvas.append("text")
                      .attr("x",function(d){return path.centroid(d)[0];})
                      .attr("y",function(d){return path.centroid(d)[1];})
                      .text(function(d){return d.properties.LNNAMN;});
          

     
    });
    
   
}

function zoomShapeFile(){




}


</script>
</head>

<body>
<input type="submit" onClick="loadShapeFile()"></input>

<p id="demo"></p>

</body>
</html>